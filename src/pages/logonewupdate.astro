---
const {
  width = 269,
  height = 235,
  duration = '2.5s',
  blue = '#0074BC',
  orange = '#F58220',
  baseStrokeWidth = 1.5,
  highlightStrokeWidth = 3,
  grey = '#ccc',
  pauseMs = 2000
} = Astro.props;
---

<style>
  .base {
    stroke-dasharray: 5 5;
    stroke-width: var(--base-w);
    fill: none;
    stroke: var(--grey);
    transition: stroke 0.4s ease;
  }

  .solid-blue { stroke: var(--blue) !important; }
  .solid-orange { stroke: var(--orange) !important; }

  .highlight {
    stroke-dasharray: 30 300;
    stroke-linecap: round;
    animation: move var(--anim-duration) linear infinite;
    stroke-width: var(--highlight-w);
    fill: none;
  }

  @keyframes move {
    from { stroke-dashoffset: 0; }
    to   { stroke-dashoffset: -330; }
  }


  .hide-stroke {
  stroke: transparent !important;
}

</style>

<svg
  id="animatedSVG"
  data-pause={pauseMs}
  data-duration={duration.replace("s","")}
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 269 235"
  width={width}
  height={height}
  style={`--anim-duration:${duration}; --base-w:${baseStrokeWidth}; --highlight-w:${highlightStrokeWidth}; --blue:${blue}; --orange:${orange}; --grey:${grey};`}
>

  <!-- BLUE LEFT -->
  <path id="blueLeft" class="base" d="M0.495453,0.426163c0,0,6.370027,46.903137,18.234447,72.000037C36.9643,110.998,49.107,125.45,83.8528,152.14c26.5912,20.426,62.5182,28.286,83.3572,46.286c13.172,11.377,26.049,36,26.049,36" />

<path class="highlight" stroke={blue}
d="M0.495453,0.426163c0,0,6.370027,46.903137,18.234447,72.000037C36.9643,110.998,49.107,125.45,83.8528,152.14c26.5912,20.426,62.5182,28.286,83.3572,46.286c13.172,11.377,26.049,36,26.049,36" />


  <!-- BLUE RIGHT -->
 <path id="blueRight" class="base"
d="M0.495453,0.426163L96.8774,59.569c0,0,88.5676,54,101.5916,108c7.32,30.347-5.21,66.857-5.21,66.857" />

<path class="highlight" stroke={blue}
d="M0.495453,0.426163L96.8774,59.569c0,0,88.5676,54,101.5916,108c7.32,30.347-5.21,66.857-5.21,66.857" />


  <!-- ORANGE LEFT -->
 <path id="orangeLeft" class="base"
d="M268.495,0.426163c0,0-6.37,46.903137-18.234,72.000037-18.234,38.5718-30.377,53.0238-65.123,79.7138-26.591,20.426-62.518,28.286-83.357,46.286-13.1718,11.377-26.0494,36-26.0494,36" />

<path class="highlight" stroke={orange}
d="M268.495,0.426163c0,0-6.37 46.903137-18.234 72.000037-18.234 38.5718-30.377 53.0238-65.123 79.7138-26.591 20.426-62.518 28.286-83.357 46.286-13.1718 11.377-26.0494 36-26.0494 36" />


  <!-- ORANGE RIGHT -->
  <path id="orangeRight" class="base"
d="M268.495,0.426163L172.114,59.569c0,0-88.5676,54-101.5922,108-7.3195,30.347,5.2098,66.857,5.2098,66.857" />

<path class="highlight" stroke={orange}
d="M268.495,0.426163L172.114,59.569c0,0-88.5676,54-101.5922,108-7.3195,30.347,5.2098,66.857,5.2098,66.857" />

</svg>

<script is:inline>
  const svg = document.getElementById("animatedSVG");

  const pauseMs = Number(svg.dataset.pause);
  const durationSec = Number(svg.dataset.duration);
  const cycleTime = durationSec * 1000;

  const blueLeft = svg.querySelector("#blueLeft");
  const blueRight = svg.querySelector("#blueRight");
  const orangeLeft = svg.querySelector("#orangeLeft");
  const orangeRight = svg.querySelector("#orangeRight");

  const highlights = svg.querySelectorAll(".highlight");

  function pauseAnim() {
    highlights.forEach(h => h.style.animationPlayState = "paused");
  }

  function resumeAnim() {
    highlights.forEach(h => h.style.animationPlayState = "running");
  }

  function solidOn() {
    blueLeft.classList.add("solid-blue");
    blueRight.classList.add("solid-blue");
    orangeLeft.classList.add("solid-orange");
    orangeRight.classList.add("solid-orange");
  }

  function solidOff() {
    blueLeft.classList.remove("solid-blue");
    blueRight.classList.remove("solid-blue");
    orangeLeft.classList.remove("solid-orange");
    orangeRight.classList.remove("solid-orange");
  }

  // Loop cycle
 setInterval(() => {
  pauseAnim();     // stop motion
  solidOn();       // show solid stroke

  // HIDE HIGHLIGHT (so shape stays correct)
  highlights.forEach(h => h.classList.add("hide-stroke"));

  setTimeout(() => {
    solidOff();    // turn off solid
    highlights.forEach(h => h.classList.remove("hide-stroke")); // show highlight again
    resumeAnim();  // continue animation
  }, pauseMs);

}, cycleTime + pauseMs);


  resumeAnim(); // start running initially
</script>
